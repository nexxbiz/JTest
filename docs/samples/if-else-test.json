{
    "version": "1.0",
    "info": {
        "name": "if-else test"
    },
    "using": [
        "./elsa-test-templates.json"
    ],
    "env": {
        "baseUrl": "https://api.totest.com",
        "tokenUrl": "https://api.totest.com/token",
        "username": "myUsername",
        "password": "myPassword"
    },
    "tests": [
        {
            "name": "execute if-else",
            "steps": [
                {
                    "type": "http",
                    "id": "execute-workflow",
                    "method": "POST",
                    "url": "{{$.env.baseUrl}}/workflows/pm/qa/ifelse",
                    "headers": [
                        {
                            "name": "Content-Type",
                            "value": "application/json"
                        }
                    ],
                    "body": {
                        "isTrue": false
                    },
                    "assert": [
                        {
                            "op": "equals",
                            "actualValue": "{{$.this.status}}",
                            "expectedValue": 200
                        },
                        {
                            "op": "exists",
                            "actualValue": "{{$.this.body.workflowInstanceId}}"
                        }
                    ],
                    "save": {
                        "workflowInstanceId": "{{$.this.body.workflowInstanceId}}"
                    }
                },
              {
                "name": "getToken",
                "type": "use",
                "template": "authenticate",
                "with": {
                  "username": "{{$.env.username}}",
                  "password": "{{$.env.password}}",
                  "tokenUrl": "{{$.env.tokenUrl}}"
                },
                "save": {
                  "token": "{{$.this.accessToken}}",
                  "authHeader": "{{$.this.tokenType}} {{$.this.accessToken}}"
                }
              }
            ]
        }
    ]
}